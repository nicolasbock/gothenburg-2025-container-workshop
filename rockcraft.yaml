name: gothenburg-2025-container-workshop
base: ubuntu@24.04
version: "0.1"
summary: Rock for workshop
description: |
  This is the rock for the Gothenburg 2025 Container Workshop.
platforms:
  amd64:

environment:
  GREETING: "Hello Rock"

services:
  app:
    command: opt/app/bin/python3 /opt/app/bin/app.py
    startup: enabled
    override: replace

parts:
  app:
    plugin: nil
    source: .
    build-packages:
      - python3-venv
    override-build: |
      INSTALL_DIR=${CRAFT_PART_INSTALL}/opt/app
      mkdir --parents ${INSTALL_DIR}
      python3 -m venv ${INSTALL_DIR}
      install -m 755 app.py ${INSTALL_DIR}/bin/app.py
      ${INSTALL_DIR}/bin/pip install --upgrade pip
      ${INSTALL_DIR}/bin/pip install -r requirements.txt
