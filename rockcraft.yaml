name: gothenburg-2025-container-workshop
base: ubuntu@24.04
version: "0.1"
summary: Rock for workshop
description: |
  This is the rock for the Gothenburg 2025 Container Workshop.
platforms:
  amd64:

environment:
  GREETING: "Hello Rock"
  PORT: "8081"

services:
  app:
    override: replace
    command: python3 usr/bin/app.py
    startup: enabled

checks:
  app-check:
    override: replace
    http:
      url: http://localhost:8081/

parts:
  app:
    plugin: nil
    source: .
    build-packages:
      - python3
      - python3-venv
      - python3-pip
    stage-packages:
      - python3
    override-build: |
      pip install -r requirements.txt --root ${CRAFT_PART_INSTALL}
      install -D -m 755 app.py ${CRAFT_PART_INSTALL}/usr/bin/app.py
